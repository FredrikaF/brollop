(function(){var l=document.querySelectorAll(".countdown-timer"),a="countdown-active",e,c,m,j,d;m=window.addEventListener?"addEventListener":"attachEvent";j=window[m];d=m=="attachEvent"?"onmessage":"message";for(e=0;e<l.length;e++){h(l[e])}function k(n,i){if(n==0){return Math.floor((Math.random()*i)+0)}else{return Math.floor(Math.random()*(i-n+1))+n}}function b(n){var i;if(n.indexOf("//")>-1){i=n.split("/")[2]}else{i=n.split("/")[0]}i=i.split(":")[0];i=i.split("?")[0];return i}function h(x){var o="",p="",r="",t="",y="",n="",w="",q="",i="",s="",v=k(1,1000000),u="";if("href" in x.attributes){u=x.attributes.href.value;o="https://"+b(u)+"/widget/countdown"}else{return}if(typeof x.attributes.rel!=="undefined"){u=""}if(x.tagName!="A"){u=""}if(typeof x.innerText==="undefined"){u=""}else{if(x.innerText==""){u=""}}if(x.className.indexOf(a)===-1){x.style.position="relative";x.style.overflow="hidden";x.style.display="inline-block";if(typeof x.innerText!=="undefined"){y=encodeURIComponent(x.innerText)}if(typeof x.dataset.background!=="undefined"){n=encodeURIComponent(x.dataset.background)}if(typeof x.dataset.timezone!=="undefined"){w=encodeURIComponent(x.dataset.timezone)}if(typeof x.dataset.width!=="undefined"){q=encodeURIComponent(x.dataset.width)}else{x.style.width="100%"}if(typeof x.dataset.style!=="undefined"){i=encodeURIComponent(x.dataset.style)}if(typeof x.dataset.language!=="undefined"){t=encodeURIComponent(x.dataset.language)}if(typeof x.dataset.textcolor!=="undefined"){p=encodeURIComponent(x.dataset.textcolor)}if(typeof x.dataset.digitscolor!=="undefined"){r=encodeURIComponent(x.dataset.digitscolor)}if(typeof x.dataset.date!=="undefined"){s=encodeURIComponent(x.dataset.date)}x.id="time_countdown_"+v;countdown_width="";countdown_height="";c=document.createElement("iframe");c.setAttribute("src",o+"?text="+y+"&timezone="+w+"&width="+q+"&style="+i+"&uid="+v+"&loc="+u+"&language="+t+"&textcolor="+p+"&background="+n+"&date="+s+"&digitscolor="+r);c.id="countdown_iframe_"+v;c.style.width=countdown_width+"px";c.style.height=countdown_height+"px";c.style.width="1px";c.style.height="1px";c.style.backgroundColor="none transparent";c.style.border="none";c.style.margin="0px";c.setAttribute("scrolling","no");c.setAttribute("allowtransparency","true");c.setAttribute("frameborder","0");x.innerHTML="";x.appendChild(c);x.target="_blank";overlay_div=document.createElement("div");overlay_div.style.width=countdown_width+"px";overlay_div.style.height=countdown_height+"px";overlay_div.style.width="1px";overlay_div.style.height="1px";overlay_div.style.position="absolute";overlay_div.style.left="0";overlay_div.style.top="0";overlay_div.style.opacity="0";overlay_div.id="ovd_"+v;x.appendChild(overlay_div);x.addEventListener("mouseover",function(){f(x,"button_over")},false);x.addEventListener("mouseout",function(){f(x,"button_out")},false);g(x,a)}}function f(i,o){var n=i.getElementsByTagName("iframe")[0].contentWindow;n.postMessage(o,"*")}function g(n,i){if(n.classList){n.classList.add(i)}else{n.className+=" "+i}}j(d,function(o){var i,n;if(o.data.event_id==="js_countdown_show"){i=document.getElementById("countdown_iframe_"+o.data.uid);n=document.getElementById("time_countdown_"+o.data.uid);if(i!==null){i.style.height="100%";i.style.visibility="visible";if(typeof n.dataset.width!=="undefined"){i.style.width=n.dataset.width+"px"}else{i.style.width="100%"}if(o.data.page=="not_found"){n.attributes.href.value="https://"+b(n.attributes.href.value)+"/countdown-timer"}f(n,"js_countdown_size")}}if(o.data.event_id==="time_countdown_size"){i=document.getElementById("countdown_iframe_"+o.data.uid);n=document.getElementById("time_countdown_"+o.data.uid);overlay=document.getElementById("ovd_"+o.data.uid);if(o.data.width!==null&&o.data.height!==null&&i!==null){if(typeof n.dataset.width!=="undefined"){i.style.width=n.dataset.size+"px"}else{i.style.width="100%"}n.style.height=o.data.height+"px";i.style.height="100%";i.style.visibility="visible";overlay.style.width=(o.data.width+6)+"px";overlay.style.height=(o.data.height+6)+"px"}}},false)})();